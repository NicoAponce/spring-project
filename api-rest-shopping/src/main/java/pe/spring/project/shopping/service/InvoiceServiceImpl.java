package pe.spring.project.shopping.service;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import pe.spring.project.shopping.entity.Invoice;import pe.spring.project.shopping.repository.IDetailRepository;import pe.spring.project.shopping.repository.IInvoiceRepository;import java.util.List;@Servicepublic class InvoiceServiceImpl implements IInvoiceService {    @Autowired    private IInvoiceRepository iInvoiceRepository;    @Autowired    private IDetailRepository detailRepository;    @Override    public List<Invoice> select() {        return iInvoiceRepository.findAll();    }    @Override    public Invoice get(Long id) {        return iInvoiceRepository.findById(id).orElse(null);    }    @Override    public Invoice insert(Invoice invoice) {        Invoice dbInvoice = iInvoiceRepository.findByNumber(invoice.getNumber());        if (dbInvoice != null) {            return dbInvoice;        }        invoice.setStatus("CREATED");        dbInvoice=iInvoiceRepository.save(invoice);        return (dbInvoice);    }    @Override    public Invoice update(Long id, Invoice invoice) {        Invoice dbInvoice = iInvoiceRepository.findById(id).orElse(null);        if (dbInvoice == null) {            return null;        }        dbInvoice.setNumber(invoice.getNumber());        dbInvoice.setDescription(invoice.getDescription());        dbInvoice.setCustomerId(invoice.getCustomerId());        dbInvoice.getDetails().clear();        dbInvoice.setDetails(invoice.getDetails());        dbInvoice.setStatus("UPDATED");        return iInvoiceRepository.save(dbInvoice);    }    @Override    public Invoice delete(Invoice invoice) {        Invoice dbInvoice = get(invoice.getId());        if (dbInvoice == null) {            return null;        }        dbInvoice.setStatus("DELETED");        return iInvoiceRepository.save(dbInvoice);    }}